(()=>{var e={};e.id=702,e.ids=[702],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},93060:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>c.a,__next_app__:()=>o,originalPathname:()=>h,pages:()=>x,routeModule:()=>m,tree:()=>d}),a(38256),a(44500),a(35866);var l=a(23191),t=a(88716),r=a(37922),c=a.n(r),i=a(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);a.d(s,n);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,38256)),"/Users/bytedance/Desktop/nababa-dress/src/app/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,44500)),"/Users/bytedance/Desktop/nababa-dress/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],x=["/Users/bytedance/Desktop/nababa-dress/src/app/dashboard/page.tsx"],h="/dashboard/page",o={require:a,loadChunk:()=>Promise.resolve()},m=new l.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65413:(e,s,a)=>{Promise.resolve().then(a.bind(a,59530))},59530:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>o});var l=a(10326),t=a(77109),r=a(17577),c=a(35047),i=a(90434),n=a(91664),d=a(29752),x=a(38443),h=a(60660);function o(){let{data:e,status:s,update:a}=(0,t.useSession)();(0,c.useRouter)();let[o,m]=(0,r.useState)(null),[u,j]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),f=async()=>{try{let e=await fetch("/api/user/stats"),s=await e.json();s.success&&m(s.data)}catch(e){console.error("获取用户统计失败:",e)}finally{j(!1)}},b=async()=>{g(!0);try{let e=await fetch("/api/checkin",{method:"POST"}),s=await e.json();s.success&&(await a(),await f()),alert(s.message)}catch(e){console.error("签到失败:",e),alert("签到失败，请稍后重试")}finally{g(!1)}};if("loading"===s||u)return l.jsx("main",{className:"container mx-auto px-4 py-8",children:(0,l.jsxs)("div",{className:"animate-pulse space-y-6",children:[l.jsx("div",{className:"h-8 bg-gray-200 rounded w-48"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>l.jsx("div",{className:"h-32 bg-gray-200 rounded"},e))})]})});if(!e?.user)return null;let N=e.user.userLevel||"free",v=e.user.credits||0,y=(e=>{switch(e){case"pro":return{title:"Pro用户",checkinFreq:"每日签到",checkinReward:"6积分",clothingLimit:"10件服装",batchGeneration:"批量生成",color:"text-purple-600",bgColor:"bg-purple-50"};case"plus":return{title:"Plus用户",checkinFreq:"每日签到",checkinReward:"6积分",clothingLimit:"3件服装",batchGeneration:"单次生成",color:"text-blue-600",bgColor:"bg-blue-50"};default:return{title:"免费用户",checkinFreq:"每周签到",checkinReward:"6积分",clothingLimit:"1件服装",batchGeneration:"单次生成",color:"text-gray-600",bgColor:"bg-gray-50"}}})(N);return(0,l.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["欢迎回来，",e.user.email]}),l.jsx("p",{className:"text-gray-600",children:"管理您的账户、积分和AI试穿历史"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,l.jsxs)(d.Zb,{children:[l.jsx(d.Ol,{className:"pb-2",children:l.jsx(d.ll,{className:"text-sm font-medium text-gray-600",children:"当前积分"})}),(0,l.jsxs)(d.aY,{children:[l.jsx("div",{className:"text-2xl font-bold text-green-600",children:v}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"每次生成消耗 2-20 积分"})]})]}),(0,l.jsxs)(d.Zb,{children:[l.jsx(d.Ol,{className:"pb-2",children:l.jsx(d.ll,{className:"text-sm font-medium text-gray-600",children:"会员等级"})}),(0,l.jsxs)(d.aY,{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[l.jsx(x.C,{variant:"pro"===N?"default":"plus"===N?"info":"secondary",children:y.title}),"free"===N&&l.jsx(i.default,{href:"/upgrade",children:l.jsx(n.z,{variant:"outline",size:"sm",children:"升级"})})]}),(0,l.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[y.checkinFreq," \xb7 ",y.clothingLimit]})]})]}),(0,l.jsxs)(d.Zb,{children:[l.jsx(d.Ol,{className:"pb-2",children:l.jsx(d.ll,{className:"text-sm font-medium text-gray-600",children:"生成次数"})}),(0,l.jsxs)(d.aY,{children:[l.jsx("div",{className:"text-2xl font-bold",children:o?.totalGenerated||0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"历史生成总数"})]})]}),(0,l.jsxs)(d.Zb,{children:[l.jsx(d.Ol,{className:"pb-2",children:l.jsx(d.ll,{className:"text-sm font-medium text-gray-600",children:"签到状态"})}),(0,l.jsxs)(d.aY,{children:[l.jsx("div",{className:"text-2xl font-bold",children:o?.checkinStreak||0}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"连续签到天数"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsxs)(d.Zb,{children:[(0,l.jsxs)(d.Ol,{children:[l.jsx(d.ll,{children:"每日签到"}),(0,l.jsxs)(d.SZ,{children:[y.checkinFreq,"，每次获得 ",y.checkinReward]})]}),(0,l.jsxs)(d.aY,{className:"space-y-4",children:[o?.canCheckinToday?l.jsx(n.z,{onClick:b,disabled:p,className:"w-full",children:p?"签到中...":`签到获得 ${y.checkinReward}`}):(0,l.jsxs)("div",{className:"text-center py-4",children:[l.jsx("div",{className:"text-green-600 text-2xl mb-2",children:"✓"}),l.jsx("p",{className:"text-sm text-gray-600",children:"free"===N?"本周已签到":"今日已签到"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o?.lastCheckin&&`上次签到: ${new Date(o.lastCheckin).toLocaleString("zh-CN")}`})]}),o?.checkinStreak&&o.checkinStreak>0&&(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsxs)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:["连续签到 ",o.checkinStreak," 天"]}),l.jsx(h.E,{value:Math.min(10*o.checkinStreak,100),className:"w-full h-2"})]})]})]}),(0,l.jsxs)(d.Zb,{className:y.bgColor,children:[(0,l.jsxs)(d.Ol,{children:[(0,l.jsxs)(d.ll,{className:y.color,children:[y.title,"特权"]}),l.jsx(d.SZ,{children:"您当前可享受的特权和福利"})]}),(0,l.jsxs)(d.aY,{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"签到频率:"}),l.jsx("span",{className:"font-medium",children:y.checkinFreq})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"签到奖励:"}),l.jsx("span",{className:"font-medium",children:y.checkinReward})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"服装数量:"}),l.jsx("span",{className:"font-medium",children:y.clothingLimit})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[l.jsx("span",{children:"生成模式:"}),l.jsx("span",{className:"font-medium",children:y.batchGeneration})]})]}),"free"===N&&l.jsx("div",{className:"pt-3 border-t",children:l.jsx(i.default,{href:"/upgrade",children:l.jsx(n.z,{variant:"outline",className:"w-full",children:"升级到Plus"})})}),("free"===N||"plus"===N)&&l.jsx("div",{className:"free"===N?"":"pt-3 border-t",children:l.jsx(i.default,{href:"/purchase",children:l.jsx(n.z,{className:"w-full",children:"充值积分"})})})]})]})]}),(0,l.jsxs)("div",{className:"mt-8",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"快速操作"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsx(i.default,{href:"/generate",children:(0,l.jsxs)(n.z,{variant:"outline",className:"w-full h-20 flex flex-col",children:[l.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDC57"}),l.jsx("span",{className:"text-sm",children:"AI试穿"})]})}),l.jsx(i.default,{href:"/purchase",children:(0,l.jsxs)(n.z,{variant:"outline",className:"w-full h-20 flex flex-col",children:[l.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDC8E"}),l.jsx("span",{className:"text-sm",children:"充值积分"})]})}),l.jsx(i.default,{href:"/profile",children:(0,l.jsxs)(n.z,{variant:"outline",className:"w-full h-20 flex flex-col",children:[l.jsx("div",{className:"text-2xl mb-1",children:"\uD83D\uDCCA"}),l.jsx("span",{className:"text-sm",children:"生成历史"})]})}),"free"===N&&l.jsx(i.default,{href:"/upgrade",children:(0,l.jsxs)(n.z,{variant:"outline",className:"w-full h-20 flex flex-col",children:[l.jsx("div",{className:"text-2xl mb-1",children:"⭐"}),l.jsx("span",{className:"text-sm",children:"升级Plus"})]})})]})]})]})}},38256:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});let l=(0,a(68570).createProxy)(String.raw`/Users/bytedance/Desktop/nababa-dress/src/app/dashboard/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),l=s.X(0,[276,850,771],()=>a(93060));module.exports=l})();